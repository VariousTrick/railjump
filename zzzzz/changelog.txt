---------------------------------------------------------------------------------------------------
Version: 1.3.15
Date: 2025-12-07
  Bugfixes:
    - 修复了传送门被突然销毁时的报错。
  Changes:
    - 传送门血量改为10万
---------------------------------------------------------------------------------------------------
Version: 1.3.14
Date: 2025-12-07
  Bugfixes:
    - 列车只能被传送一次的BUG,如果传送门已经传送过一次列车，后续列车无法传送的问题。
---------------------------------------------------------------------------------------------------
Version: 1.3.12
Date: 2025-12-07
  Bugfixes:
    - attempt to index field 'main' (a nil value)报错修复
---------------------------------------------------------------------------------------------------
Version: 1.3.11
Date: 2025-12-07
  Bugfixes:
    - [核心修复] 重写了 Cybersyn 兼容模块的数据库写入/删除逻辑，修复了在连接或断开时会清除同地表对下其他连接（如 SE 太空电梯）的严重 Bug。
  Performance:
    - [重大优化] 重构了传送逻辑的 on_tick 循环，引入“活跃列表”机制。现在只有正在进行传送的建筑才会占用 CPU 资源，大幅降低了模组在待机状态下的性能消耗。
    - [优化] 为建造、拆除、死亡等高频事件增加了过滤器，彻底解决了因大量实体（如虫子）死亡/建造而导致的爆发性卡顿 (UPS drop)。
    - [优化] 在“无资源消耗”模式下，完全禁用了所有相关的电网和维护检查循环，使该模式下的性能消耗降至最低。
---------------------------------------------------------------------------------------------------
Version: 1.3.10
Date: 2025-12-06
  Compatibility:
    - [互斥逻辑] 更新了 Cybersyn 调度器逻辑，增加了对 RiftRail 模组的识别与检测。如果列车已被 RiftRail 接管，本模组将停止干预，确保两个传送门模组在同一存档中和平共存。
  Features:
    - [开发] 同步更新了“开启调试日志”的模组设置，现在可以在游戏中通过设置菜单实时控制日志输出。
---------------------------------------------------------------------------------------------------
Version: 1.3.9
Date: 2025-12-06
  Bugfixes:
    - [核心修复] 重写了与 Cybersyn 模组的交互逻辑，修复了严重的兼容性问题：
    - 修复了在建立或断开连接时，会错误清除同地表上其他连接（如 SE 太空电梯或其他 Railjump 传送门）的 Bug。现在采用“定点读写”模式，绝对安全且互不干扰。
    - 优化了飞船起降时的逻辑，消除了落地时可能产生的数据库覆写风险。
  Features:
    - [开发] 新增了“开启调试日志”的模组设置（位于 设置 -> 模组设置 -> 地图）。现在可以在游戏中实时开启或关闭调试信息，无需重启游戏或修改代码。
---------------------------------------------------------------------------------------------------
Version: 1.3.8
Date: 2025-12-03
  Improvements:
    - 改进了“传送门放置器”的物品说明。
    - 新的描述更清晰地解释了其作为一次性高级部署系统的功能、高昂的制造成本，及其在太空或飞船等特殊环境中部署的能力。
    - 新增了重要的回收提示。 明确指出放置器是一次性消耗品，拆除已部署的传送门将只会返还一个标准的传送门核心，而不会返还放置器本身，以避免玩家产生误解。
  Bugfixes:
    - 修复了多车厢列车传送后，时刻表错误地重置到第一个站点的严重问题。
---------------------------------------------------------------------------------------------------
Version: 1.3.7
Date: 2025-12-03
  Optimizations:
    - 全面性能重构 (Massive Performance Overhaul): 对模组的核心逻辑进行了彻底重构，显著降低了 CPU 使用率，特别是在传送门数量较多时。
    - 引入了传送门的“休眠/激活”状态机 (Sleep/Active State Machine)。 现在，闲置的传送门将完全不消耗任何 CPU 资源，只有在火车传送时才会激活相关计算，从根本上解决了无论传送门是否工作都会产生性能开销的问题。
    - 重构了核心 on_tick 主循环。 将原本分散的多个循环合并为一个，并引入了负载均衡 (Load Balancing) 机制，彻底消除了由电网和维护检查导致的周期性性能尖峰 (Lag Spikes)。
    - 实现了针对 SE 飞船起飞与降落的 Cybersyn 动态管理逻辑。
    - 优化了核心数据查找算法。 通过引入 ID 缓存，将查找配对传送门的时间复杂度从 O(N) 降低到 O(1)，显著提升了有大量传送门时的性能。
    - 移除了高开销的区域扫描逻辑。 修复了“等待燃料”的唤醒逻辑，现在它通过精准的状态标记实现，不再需要每秒扫描地图，大幅降低了资源消耗模式下的性能开销。
  Bugfixes:
    - 修复了因 on_load 事件修改 storage 导致的致命 CRC 错误。 此修复确保了模组的存档/加载稳定性，并且现在可以安全地用于多人游戏。
    - 修复了当火车因缺少“奇异物质”暂停后，无法消耗对侧传送门内补给的燃料来重新启动传送的问题。 现在“共享网络燃料”的逻辑已在新的高效唤醒机制中被正确实现。
    - 修复了传送门配对下拉菜单的过滤逻辑， 现在会正确地隐藏已经与其他传送门配对的目标（除非配对目标是当前传送门）。
    - 修复了因使用本地化（多语言）文本而导致解析 ID 失败并报错的问题。 通过引入 tags 来存储 ID，将数据与显示彻底分离。
    - 电网自动愈合：复了 SE 跨地表移动飞船时物理电线会被切断的问题。现在飞船起飞/降落后，脚本会根据继承的状态强制修复物理电线连接。
  Improvements:
    - 改进了配对下拉菜单的显示格式。 现在列表更加简洁，只显示目标传送门的图标、名称、ID 和地表，移除了多余的配对状态信息，使其与 RiftRail 的体验保持一致。
    - 为下拉菜单中的条目添加了完整的本地化支持。
---------------------------------------------------------------------------------------------------
Version: 1.2.0
Date: 2025-12-02
  Features:
    - 新增“传送门放置器” (Placer) 系统：
    - 引入了类似 RiftRail 的放置器机制，解决了蓝图无法保存传送门配置（名称、图标、模式）的问题。
    - 新增 Space Exploration (SE) 飞船智能物流隔离系统：
    - 实现了针对 SE 飞船起飞与降落的 Cybersyn 动态管理逻辑。
    - 起飞逻辑：检测到飞船进入太空地表时，自动唤醒 Cybersyn 控制器并注册连接，确保太空物流即时上线。
    - 降落逻辑：检测到飞船降落至地面时，自动注销连接并使接口进入“隐身模式”，防止地面物流网络错误的尝试寻找路径进入飞船内部。
    - 新增起降状态通知提示，并可在模组设置中为每个玩家独立关闭。
  Improvements:
    - 完善的 SE 克隆与数据迁移支持：
    - 实现了深度的实体克隆支持，确保传送门随飞船移动时，所有数据（ID、配对关系、电网状态）完美继承。
    - 组件重连 (Re-binding) 算法：在飞船移动后，脚本会基于容错半径智能搜索并重新绑定新位置的内部组件（电线杆、轨道、车站），防止组件重复生成或引用丢失。
  Bugfixes:
    - 电网自动愈合：复了 SE 跨地表移动飞船时物理电线会被切断的问题。现在飞船起飞/降落后，脚本会根据继承的状态强制修复物理电线连接。
---------------------------------------------------------------------------------------------------
Version: 1.1.0
Date: 2025-11-27
  Features:
    - 新增 Cybersyn + Space Exploration (SE) 混合环境下的深度兼容支持可以。
    - 实现了对 SE 太空电梯接口的“完美伪装”，现在 Cybersyn 的 SE 兼容脚本会将传送门识别为合法的跨地表连接，并自动接管调度逻辑。
  Bugfixes:
    - 修复了在 SE 环境下，Cybersyn 虽然能识别地表连接，却随机无法生成正确时刻表（表现为任务已创建但时刻表缺失传送步骤）的严重问题。
    - 实施了“智能 ID 排序伪装”策略：
    - 针对 Cybersyn 内部强制按 Unit ID 排序并仅检查首个实体名称的硬性逻辑，现在模组会自动识别并伪装 ID 较小的那个传送门端点。
    - 这彻底解决了因建造顺序或连接操作顺序不同而导致的校验失败，确保了 100% 的调度成功率。
---------------------------------------------------------------------------------------------------
Version: 1.0.10
Date: 2025-11-20
  Features:
    - 新增 Cybersyn 原生兼容支持（无 SE 环境）
    - 现在即使没有安装 Space Exploration (SE)，传送门也能完美支持 Cybersyn 的跨地表物流调度
  Bugfixes:
    - 修复了 Cybersyn 列车到达异地后不装卸货的问题
    - 通过在传送落地瞬间自动补全时刻表中的“临时轨道（Rail）”记录，确保 Cybersyn 能正确识别列车到站并激活机械臂。
    - 修复了列车传送导致发货单被撤销及重复派单的问题
    - 引入了“数据隐身迁移”机制，防止 Cybersyn 在列车传送销毁旧实体时误判任务失败，从而避免了调度器重复指派新车执行同一任务。
    - 修复了列车返回车库后“变砖”无法再次接单的问题
    - 修正了回程状态下的数据迁移逻辑，确保列车回到车库后能正确结算任务并重新进入可用队列。
    - 自动清除 Cybersyn 因跨地表寻路产生的虚假红色警报图标，保持界面整洁
---------------------------------------------------------------------------------------------------
Version: 1.0.9
Date: 2025-11-14
  Bugfixes:
    - 修复了长编组“推进模式”列车传送中断的严重Bug
    - 此前，当火车由车头在后方推动进入传送门时，如果货运车厢数量较多（通常超过2节），传送过程会失败，导致部分车厢堵塞在出口，无法完成传送。
    - 重构了传送过程中的速度控制核心。现在传送门会为出口端的临时火车提供持续、主动的动力，确保其在整个传送过程中都能平稳驶离出口。
    - 此修复从根本上解决了因列车质量过大导致动力真空期减速过快的问题，现在任何编组长度的列车都能可靠地通过传送门。
---------------------------------------------------------------------------------------------------
Version: 1.0.8
Date: 2025-11-14
  Changes:
    - 关闭了游戏日志打印。
---------------------------------------------------------------------------------------------------
Version: 1.0.7
Date: 2025-11-14
  Major Improvements:
    - 更智能的火车处理: 传送门现在拥有了全新的“动态锚定系统”（复刻太空电梯拖车），能够完美处理各种复杂的火车配置。
    - 全面支持反向列车: 无论您的火车是“倒车”进入传送门，还是由尾部的机车“推入”，现在都能被正确地传送，并在出口处保持其原始的编组和朝向。
    - 增强的传送流畅度: 对传送过程的物理和速度控制进行了深度优化，使其表现得更加稳定和顺滑，与SE太空电梯的体验几乎一致。
  Bugfixes:
    - 修复了之前版本中，在特定方向（东西向）的传送门上，自动模式的火车传送时会导致游戏崩溃的严重问题。
---------------------------------------------------------------------------------------------------
Version: 1.0.6
Date: 2025-11-14
  Bugfixes:
    - 修复了一个长期存在的严重崩溃问题：当自动模式的火车驶入某些特定方向的传送门时（在游戏中表现为使用白色或绿色贴图的传送门），游戏会因为方向计算错误而崩溃。
    - 我们已经从根本上修正了方向检测的逻辑。现在，无论您如何放置和配对传送门，自动火车都应该能够安全、稳定地通过，不再出现崩溃。
  Known Issues:
    - 在某些情况下，传送后的火车车头起步速度可能会稍慢，但不会影响其正常运行。我们将在未来的版本中继续优化传送的平滑度。
---------------------------------------------------------------------------------------------------
Version: 1.0.5
Date: 2025-11-13
  Changes:
    - 增加了2种主体建筑颜色，并压缩了图片体积，以减少MOD体积。
---------------------------------------------------------------------------------------------------
Version: 1.0.4
Date: 2025-11-13
  Changes:
    - 格式化了所有脚本文件，以方便有修改文件需求的玩家。让文件内容显示更为明显
---------------------------------------------------------------------------------------------------
Version: 1.0.3
Date: 2025-11-12
  Quality of Life:
    - “远程观察”功能已适配 Factorio 2.0 API:
    - 为了跟上引擎的现代化脚步并解决旧预览窗口无法交互的问题，在没有太空探索 (SE) Mod 的情况下，“地图观察”按钮现在会调用此全新的原生 API。
    - 这为玩家带来了**原生级别（Native-level）的交互式地图体验**，而不是一个有限的 GUI 窗口。功能包括无限制的平移、缩放和与世界的交互。
    - 与 SE Mod 共同使用时，将继续优先调用 SE 自身的远程观察功能，以确保最佳体验。
    - 在非太空探索 (SE) 游戏环境中，“地图观察”按钮的行为已更新。原有的静态摄像头预览已被替换为功能完整的交互式地图视图，该视图会直接定位到配对的传送门。此改动旨在提供更流畅、更有用的远程勘察体验。
---------------------------------------------------------------------------------------------------
Version: 1.0.2
Date: 2025-11-09
  Changes:
    - 修复了一点无关紧要的东西
---------------------------------------------------------------------------------------------------
Version: 1.0.1
Date: 2025-11-09
  Features:
    - 引入“电网维持”消耗机制:
    - 在“有消耗模式”下，已连接的远程电网现在需要持续消耗 [不稳定的时空碎片] 来维持。
    - 这是一个“预付费”系统：连接时消耗启动费用，然后进入计时周期。当计时结束后，会自动从传送门网络中扣除下一周期的费用。
    - 如果网络中碎片不足，电网将自动断开，并向玩家发出可配置的警告信息。
    - 增加“自动恢复连接”功能:
    - 对于因缺少碎片而被系统自动断开的电网，现在进入了“待机”模式。一旦玩家向该传送门网络中补充了足够的碎片，电网将会自动恢复连接。
    - 玩家手动断开的电网则不会自动恢复。
    - 新增 Mod 设置选项:
    - 电网维持时间: 玩家现在可以在“设置->模组设置”中，实时调整每个（组）碎片能维持电网的时间（1-5分钟），以自定义游戏难度。
    - 显示电网警告: 玩家现在可以根据个人偏好，选择是否在聊天框中显示因碎片耗尽而导致的电网断开警告。
    - 为重命名功能增加图标选择器:
    - 传送门重命名界面现在增加了一个图标选择按钮，允许玩家像命名火车站一样，为传送门名称添加物品图标。
  Balancing:
    - 重制核心物品生产配方:
    - 彻底移除了所有临时的占位配方（如“铁板->奇异物质”）。
    - 奇异物质: 现在需要在离心机中，使用三种顶级插件、铀-235等终局材料进行生产，明确了其后期科技定位。
    - 不稳定的时空碎片: 新增了一个极其低效的“紧急制备”配方（在离心机中），作为传送返还之外的补充来源。
    - 个人时空稳定器: 配方被重新平衡，使其成本更合理。
    - 奇异物质 (回收): 调整了生产地点（改为组装机/手搓），使其与“直接生产”路线形成差异化。
    - 重制传送门建造成本:
    - 传送门的建造成本被大幅提高，现在需要处理单元、雷达、蓄电池以及Mod自身的专属物品，使其成为一个名副其实的终局工程。
    - 为玩家传送增加距离限制:
    - 在“有消耗模式”下，玩家现在必须在传送门附近（默认25格）才能进行个人传送，修复了可以从地图任意角落传送的平衡性问题。“无消耗模式”则保持全局传送。
  Bugfixes:
    - 修复了一个严重的Bug，该Bug曾导致通过“断开电网”按钮或“解除配对”操作无法真正断开电网的物理连接。
    - 修复了多个由于API使用不当而导致的崩溃问题，特别是与 nil 值相关的 attempt to index... 和 attempt to compare... 错误。
    - 修复了一个在加载使用旧版本Mod创建的存档时，会因数据结构不兼容而导致游戏崩溃的问题。现在Mod包含了数据迁移逻辑，可以安全地加载旧存档。
    - 修复了多个与本地化相关的崩溃和显示错误，特别是 concatenate a table value 和 Unknown key 的问题。
  Quality of Life:
    - 完全本地化: Mod所有的脚本文件（.lua）中的硬编码中文字符串均已移除，全部替换为本地化键，为未来的多语言翻译做好了准备。
---------------------------------------------------------------------------------------------------
Version: 1.0.0
Date: 2025-11-09
  Features:
    - 初始版本发布。
    - 实现了完整的火车内容、时刻表和乘客传送。
    - 支持玩家传送和跨传送门电网。
    - 增加了对 Space Exploration 和 Cybersyn 的（可选）兼容性。
    - 完全模仿se的太空电梯，相关代码估计都是一样的
    - 本MOD完全AI制作和调试。
    - 还没找到平衡，有意见可以提出来，我继续让AI跑一下。
    - 本人完全看不懂文件内容，不具备修改水平，只能任由AI制作。
    - 如果se对此有意见，将删除此MOD不再发布。
